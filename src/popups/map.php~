<?php

require '../security.php';
require '../classes/class_external_script.php';
//require '../configuration.php';

class MAP extends EXTERNAL_SCRIPT
{
	function Display($css_file,$title) {
		$this->displaybody();
		}
	function DisplayBody() {

	$sql = MySQLConnection::getInstance();


	$placeMgr = new PlaceManager();
	
	$places = $placeMgr->getPlaces();

		echo '
			


			<div style="width:880px;height:477px;background-image:url('.URL.'images/map.png);padding-top:23px;padding-left:20px;">
				<div style="position:relative;width:460px;height:455px;overflow:scroll;">
					<img src="'.URL.'images/mapa.bmp" />	

';
				$i=0;
				foreach($places as $place) {
					echo '
					<img alt="" onclick="showDetails('.$place->id.')" style="cursor: help; border-style: none; position: absolute; left: '.(15*$place->x).'px; top: '.(15*$place->y).'px; width: 17px; height: 17px;" src="'.URL.'images/play_map_dot.gif" title="'.$place->name.'">
					<div onclick="showDetails('.$i++.')" style="cursor: help;font-size:12px;width:100px;background-color:black;text-align:center;border:solid 1px #aaaaaa;position:absolute;left: '.(15*$place->x).'px; top: '.(15*$place->y+20).'px;">'.$$place->name.'</div>
';
				}


echo '				</div>

				<script type="text/javascript">
				var cities = Array();';
				
				$i=0;
				foreach($city as $c) {
					echo 'cities['.$i++.'] = "'.$c['title'].'";';
				}
				reset($city);
			echo '


				function showDetails(id) {
					document.getElementById("map_right").innerHTML = "<h2>"+cities[id]+"</h2>";
				}
			</script>


				<div id="map_right" style="position:absolute;left:510px;top:30px;width:360px;height:440px;">
					Cuuco
				</div>

			</div>';
		
		
		
		
		
		
		
		
		
		
		
	
	}

	function __construct() {
		session_start();
		$this->Display('external_script.css','Mapa sveta');
	}

}

	// vytvorenie objektu skriptu
	$page = new MAP();

?>